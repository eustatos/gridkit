{
    "$schema": "https://json-schema.org/draft-07/schema",
    "$id": "https://gridkit.dev/schemas/feature-catalog.schema.json",
    "title": "GridKit Feature Catalog Schema",
    "description": "Schema for the GridKit feature catalog that maps all planned and implemented features",
    "type": "object",
    "required": [
        "version",
        "updatedAt",
        "description",
        "features"
    ],
    "properties": {
        "$schema": {
            "type": "string",
            "format": "uri",
            "description": "Reference to this JSON schema",
            "default": "https://gridkit.dev/schemas/feature-catalog.schema.json"
        },
        "version": {
            "type": "string",
            "pattern": "^\\d+\\.\\d+\\.\\d+$",
            "description": "Semantic version of the feature catalog",
            "examples": [
                "1.0.0",
                "1.1.0"
            ]
        },
        "updatedAt": {
            "type": "string",
            "format": "date",
            "description": "Last update date in ISO format (YYYY-MM-DD)",
            "examples": [
                "2024-01-16"
            ]
        },
        "description": {
            "type": "string",
            "description": "Brief description of the feature catalog",
            "minLength": 10,
            "maxLength": 500
        },
        "features": {
            "type": "array",
            "description": "List of feature categories or major features",
            "minItems": 1,
            "items": {
                "$ref": "#/$defs/feature"
            }
        },
        "statistics": {
            "type": "object",
            "description": "Auto-calculated statistics about features",
            "properties": {
                "totalFeatures": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "Total number of top-level features"
                },
                "byStatus": {
                    "type": "object",
                    "description": "Count of features by implementation status",
                    "properties": {
                        "implemented": {
                            "type": "integer",
                            "minimum": 0
                        },
                        "in-progress": {
                            "type": "integer",
                            "minimum": 0
                        },
                        "planned": {
                            "type": "integer",
                            "minimum": 0
                        }
                    },
                    "additionalProperties": false
                },
                "byPriority": {
                    "type": "object",
                    "description": "Count of features by priority level",
                    "properties": {
                        "P0": {
                            "type": "integer",
                            "minimum": 0
                        },
                        "P1": {
                            "type": "integer",
                            "minimum": 0
                        },
                        "P2": {
                            "type": "integer",
                            "minimum": 0
                        },
                        "P3": {
                            "type": "integer",
                            "minimum": 0
                        }
                    },
                    "additionalProperties": false
                },
                "byCategory": {
                    "type": "object",
                    "description": "Count of features by category",
                    "patternProperties": {
                        "^[a-z-]+$": {
                            "type": "integer",
                            "minimum": 0
                        }
                    },
                    "additionalProperties": false
                }
            },
            "additionalProperties": false,
            "required": [
                "totalFeatures",
                "byStatus",
                "byPriority"
            ]
        },
        "mvpFocus": {
            "type": "array",
            "description": "IDs of features critical for MVP release",
            "items": {
                "type": "string",
                "pattern": "^[a-z-]+$"
            },
            "uniqueItems": true
        },
        "nextSteps": {
            "type": "array",
            "description": "Recommended next steps for development",
            "items": {
                "type": "string",
                "minLength": 5,
                "maxLength": 200
            }
        }
    },
    "additionalProperties": false,
    "$defs": {
        "feature": {
            "type": "object",
            "description": "A major feature or feature category",
            "required": [
                "id",
                "name",
                "description",
                "category",
                "priority",
                "status"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "pattern": "^[a-z-]+$",
                    "description": "Unique identifier in kebab-case",
                    "examples": [
                        "data-management",
                        "plugin-system"
                    ]
                },
                "name": {
                    "type": "string",
                    "description": "Human-readable feature name",
                    "minLength": 3,
                    "maxLength": 100
                },
                "description": {
                    "type": "string",
                    "description": "Detailed description of the feature",
                    "minLength": 10,
                    "maxLength": 500
                },
                "category": {
                    "type": "string",
                    "enum": [
                        "core",
                        "architecture",
                        "configuration",
                        "integration",
                        "ui",
                        "data",
                        "plugin",
                        "security",
                        "performance",
                        "output"
                    ],
                    "description": "Functional category of the feature"
                },
                "priority": {
                    "type": "string",
                    "enum": [
                        "P0",
                        "P1",
                        "P2",
                        "P3"
                    ],
                    "description": "Implementation priority (P0 = highest)",
                    "default": "P2"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "planned",
                        "in-progress",
                        "implemented",
                        "deprecated"
                    ],
                    "description": "Current implementation status",
                    "default": "planned"
                },
                "criticalForMvp": {
                    "type": "boolean",
                    "description": "Whether this feature is critical for MVP release",
                    "default": false
                },
                "implementedParts": {
                    "type": "array",
                    "description": "Parts of this feature that are already implemented",
                    "items": {
                        "type": "string"
                    },
                    "uniqueItems": true
                },
                "implementedTasks": {
                    "type": "array",
                    "description": "Task IDs that implemented parts of this feature",
                    "items": {
                        "type": "string",
                        "pattern": "^[A-Z]+-\\d+$"
                    },
                    "uniqueItems": true
                },
                "notes": {
                    "type": "string",
                    "description": "Additional notes or context",
                    "maxLength": 1000
                },
                "dependencies": {
                    "type": "array",
                    "description": "IDs of features this depends on",
                    "items": {
                        "type": "string",
                        "pattern": "^[a-z-]+$"
                    },
                    "uniqueItems": true
                },
                "blocks": {
                    "type": "array",
                    "description": "IDs of features blocked by this feature",
                    "items": {
                        "type": "string",
                        "pattern": "^[a-z-]+$"
                    },
                    "uniqueItems": true
                },
                "subFeatures": {
                    "type": "array",
                    "description": "Nested sub-features or feature groups",
                    "items": {
                        "$ref": "#/$defs/subFeature"
                    }
                },
                "apiSurface": {
                    "type": "object",
                    "description": "Expected API surface for this feature",
                    "properties": {
                        "exports": {
                            "type": "array",
                            "description": "Expected TypeScript exports",
                            "items": {
                                "type": "string"
                            }
                        },
                        "config": {
                            "type": "string",
                            "description": "Main configuration interface name"
                        },
                        "methods": {
                            "type": "array",
                            "description": "Expected public methods",
                            "items": {
                                "type": "string"
                            }
                        }
                    },
                    "additionalProperties": false
                }
            },
            "additionalProperties": false
        },
        "subFeature": {
            "type": "object",
            "description": "A sub-feature or feature group",
            "required": [
                "id",
                "name"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "pattern": "^[a-z-]+$",
                    "description": "Unique identifier for sub-feature"
                },
                "name": {
                    "type": "string",
                    "description": "Human-readable sub-feature name",
                    "minLength": 3,
                    "maxLength": 100
                },
                "description": {
                    "type": "string",
                    "description": "Description of the sub-feature",
                    "maxLength": 500
                },
                "items": {
                    "type": "array",
                    "description": "Individual feature items in this group",
                    "items": {
                        "$ref": "#/$defs/featureItem"
                    }
                }
            },
            "additionalProperties": false
        },
        "featureItem": {
            "type": "object",
            "description": "An individual feature item",
            "required": [
                "id",
                "name"
            ],
            "properties": {
                "id": {
                    "type": "string",
                    "pattern": "^[a-z-]+$",
                    "description": "Unique identifier for feature item"
                },
                "name": {
                    "type": "string",
                    "description": "Human-readable feature item name",
                    "minLength": 3,
                    "maxLength": 100
                },
                "description": {
                    "type": "string",
                    "description": "Detailed description of the feature item",
                    "maxLength": 500
                },
                "priority": {
                    "type": "string",
                    "enum": [
                        "P0",
                        "P1",
                        "P2",
                        "P3"
                    ],
                    "description": "Implementation priority",
                    "default": "P2"
                },
                "status": {
                    "type": "string",
                    "enum": [
                        "planned",
                        "in-progress",
                        "implemented",
                        "deprecated"
                    ],
                    "description": "Implementation status",
                    "default": "planned"
                },
                "complexity": {
                    "type": "string",
                    "enum": [
                        "low",
                        "medium",
                        "high",
                        "critical"
                    ],
                    "description": "Estimated implementation complexity"
                },
                "estimatedEffort": {
                    "type": "string",
                    "description": "Estimated effort (e.g., '2-3 days', '1 week')"
                },
                "dependsOn": {
                    "type": "array",
                    "description": "IDs of items this depends on",
                    "items": {
                        "type": "string",
                        "pattern": "^[a-z-]+$"
                    }
                },
                "notes": {
                    "type": "string",
                    "description": "Additional notes or requirements"
                }
            },
            "additionalProperties": false
        }
    }
}