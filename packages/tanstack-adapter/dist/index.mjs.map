{"version":3,"sources":["../src/enhancers/withEvents.ts","../src/enhancers/withPerformanceMonitoring.ts","../src/enhancers/withValidation.ts","../src/enhancers/withPlugins.ts"],"sourcesContent":["// Event enhancer for TanStack Table adapter\r\n// Uses GridKit core EventBus for full event system features\r\n\r\nimport type { Table as TanStackTable, RowData } from '@tanstack/react-table'\r\nimport type { EnhancedTable } from '../types/enhanced'\r\nimport { EventBus, createEventBus } from '@gridkit/core/events'\r\nimport { useMemo } from 'react'\r\nimport { useReactTable } from '@tanstack/react-table'\r\n\r\n/**\r\n * High-order function to add event features to TanStack Table\r\n */\r\nexport function withEvents<TData extends RowData>(\r\n  table: TanStackTable<TData>,\r\n  config?: { devMode?: boolean } | boolean\r\n): EnhancedTable<TData> {\r\n  // Create event bus from core\r\n  const eventConfig = typeof config === 'boolean' ? {} : config ?? {}\r\n  const eventBus = createEventBus({\r\n    devMode: eventConfig.devMode ?? true,\r\n  })\r\n\r\n  // Wrap table with event methods from GridKit core\r\n  const enhancedTable = {\r\n    ...table,\r\n    on: (event: string, handler: (event: any) => void) => {\r\n      return eventBus.on(event, handler)\r\n    },\r\n    off: (event: string, handler: (event: any) => void) => {\r\n      eventBus.off(event, handler)\r\n    },\r\n    emit: (event: string, payload: any, options?: any) => {\r\n      eventBus.emit(event, payload, options)\r\n    },\r\n    use: (middleware: any) => {\r\n      return eventBus.use(middleware)\r\n    },\r\n    getStats: () => eventBus.getStats(),\r\n  } as EnhancedTable<TData>\r\n\r\n  return enhancedTable\r\n}\r\n\r\n/**\r\n * Create enhanced table with events from options\r\n */\r\nexport function createEnhancedTableWithEvents<TData extends RowData>(\r\n  options: any,\r\n  config?: { devMode?: boolean } | boolean\r\n): EnhancedTable<TData> {\r\n  // First create TanStack table\r\n  const tanstackTable = useReactTable(options)\r\n\r\n  // Add events\r\n  return withEvents(tanstackTable, config)\r\n}\r\n\r\n/**\r\n * Enhanced version of TanStack useTable with events\r\n */\r\nexport function useTableWithEvents<TData extends RowData>(\r\n  options: any,\r\n  config?: { devMode?: boolean } | boolean\r\n): EnhancedTable<TData> {\r\n  // First create TanStack table\r\n  const tanstackTable = useReactTable(options)\r\n\r\n  // Add events using useMemo for stability\r\n  return useMemo(() => {\r\n    return withEvents(tanstackTable, config)\r\n  }, [tanstackTable, config])\r\n}\r\n","// Performance monitoring enhancer for TanStack Table adapter\r\n// Uses GridKit core PerformanceMonitor for accurate tracking and budget checking\r\n\r\nimport type { Table as TanStackTable, RowData } from '@tanstack/react-table'\r\nimport type { EnhancedTable, PerformanceConfig } from '../types/enhanced'\r\nimport { createPerformanceMonitor, type PerformanceMonitor as CorePerformanceMonitor } from '@gridkit/core/performance'\r\nimport { useMemo } from 'react'\r\nimport { useReactTable } from '@tanstack/react-table'\r\n\r\n/**\r\n * High-order function to add performance monitoring to TanStack Table\r\n */\r\nexport function withPerformanceMonitoring<TData extends RowData>(\r\n  table: TanStackTable<TData>,\r\n  config?: PerformanceConfig | boolean\r\n): EnhancedTable<TData> {\r\n  // Create performance monitor from core\r\n  const perfConfig = typeof config === 'boolean' ? {} : config\r\n  const performanceConfig: any = {\r\n    enabled: true,\r\n    budgets: {\r\n      tableCreation: 100,\r\n      stateUpdate: 50,\r\n      renderCycle: 16,\r\n      rowModelBuild: 30,\r\n      eventProcessing: 10,\r\n      ...perfConfig.budgets,\r\n    },\r\n    onViolation: perfConfig.onViolation,\r\n  }\r\n  const monitor = createPerformanceMonitor(performanceConfig)\r\n\r\n  // Track operations - wrap key methods\r\n  const trackedMethods = ['getRowModel', 'getSortedRowModel', 'getFilteredRowModel']\r\n  const enhancedTable = { ...table } as EnhancedTable<TData>\r\n\r\n  trackedMethods.forEach(method => {\r\n    // @ts-ignore - dynamically add methods\r\n    enhancedTable[method] = ((...args: any[]) => {\r\n      return monitor.track(String(method), () => (table as any)[method](...args))\r\n    }) as any\r\n  })\r\n\r\n  // Add metrics access with core performance monitor methods\r\n  enhancedTable.metrics = {\r\n    ...monitor,\r\n    getMetrics: () => monitor.getMetrics(),\r\n    checkBudgets: () => monitor.checkBudgets(),\r\n    setBudgets: (budgets: any) => monitor.setBudgets(budgets),\r\n  }\r\n\r\n  return enhancedTable\r\n}\r\n\r\n/**\r\n * Create enhanced table with performance monitoring from options\r\n */\r\nexport function createEnhancedTableWithPerformance<TData extends RowData>(\r\n  options: any,\r\n  config?: PerformanceConfig | boolean\r\n): EnhancedTable<TData> {\r\n  // First create TanStack table\r\n  const tanstackTable = useReactTable(options)\r\n\r\n  // Add performance monitoring\r\n  return withPerformanceMonitoring(tanstackTable, config)\r\n}\r\n\r\n/**\r\n * Enhanced version of TanStack useTable with performance monitoring\r\n */\r\nexport function useTableWithPerformance<TData extends RowData>(\r\n  options: any,\r\n  config?: PerformanceConfig | boolean\r\n): EnhancedTable<TData> {\r\n  // First create TanStack table\r\n  const tanstackTable = useReactTable(options)\r\n\r\n  // Add performance monitoring using useMemo for stability\r\n  return useMemo(() => {\r\n    return withPerformanceMonitoring(tanstackTable, config)\r\n  }, [tanstackTable, config])\r\n}\r\n","// Validation enhancer for TanStack Table adapter\r\n// Uses GridKit core ValidationManager for schema-based validation\r\n\r\nimport type { Table as TanStackTable, RowData } from '@tanstack/react-table'\r\nimport type { EnhancedTable, ValidationConfig, ValidationManager } from '../types/enhanced'\r\nimport { createValidationManager } from '@gridkit/core/validation'\r\nimport { useMemo } from 'react'\r\nimport { useReactTable } from '@tanstack/react-table'\r\n\r\n/**\r\n * High-order function to add validation to TanStack Table\r\n */\r\nexport function withValidation<TData extends RowData>(\r\n  table: TanStackTable<TData>,\r\n  config?: ValidationConfig\r\n): EnhancedTable<TData> {\r\n  // Create validation manager from core\r\n  const validationManager = createValidationManager({\r\n    defaultMode: config?.mode || 'normal',\r\n    cacheEnabled: config?.cache ?? true,\r\n    throwOnError: config?.throwOnError ?? false,\r\n  })\r\n\r\n  // Add validation methods\r\n  const enhancedTable = {\r\n    ...table,\r\n    validator: validationManager,\r\n    validateRow: async (row: TData, index: number) => {\r\n      return validationManager.validateRow(row, index)\r\n    },\r\n    validateAll: async () => {\r\n      const rows = (table as any).getRowModel?.().rows || []\r\n      return validationManager.validateArray(rows)\r\n    },\r\n  } as EnhancedTable<TData>\r\n\r\n  return enhancedTable\r\n}\r\n\r\n/**\r\n * Create enhanced table with validation from options\r\n */\r\nexport function createEnhancedTableWithValidation<TData extends RowData>(\r\n  options: any,\r\n  config?: ValidationConfig\r\n): EnhancedTable<TData> {\r\n  // First create TanStack table\r\n  const tanstackTable = useReactTable(options)\r\n\r\n  // Add validation\r\n  return withValidation(tanstackTable, config)\r\n}\r\n\r\n/**\r\n * Enhanced version of TanStack useTable with validation\r\n */\r\nexport function useTableWithValidation<TData extends RowData>(\r\n  options: any,\r\n  config?: ValidationConfig\r\n): EnhancedTable<TData> {\r\n  // First create TanStack table\r\n  const tanstackTable = useReactTable(options)\r\n\r\n  // Add validation using useMemo for stability\r\n  return useMemo(() => {\r\n    return withValidation(tanstackTable, config)\r\n  }, [tanstackTable, config])\r\n}\r\n","// Plugin enhancer for TanStack Table adapter\r\n// Uses GridKit core PluginManager for plugin management\r\n\r\nimport type { Table as TanStackTable, RowData } from '@tanstack/react-table'\r\nimport type { EnhancedTable, Plugin } from '../types/enhanced'\r\nimport { PluginManager } from '@gridkit/core/plugin'\r\nimport { useMemo } from 'react'\r\nimport { useReactTable } from '@tanstack/react-table'\r\n\r\n/**\r\n * High-order function to add plugin management to TanStack Table\r\n */\r\nexport function withPlugins<TData extends RowData>(\r\n  table: TanStackTable<TData>,\r\n  plugins: Plugin[] = []\r\n): EnhancedTable<TData> {\r\n  // Create plugin manager from core\r\n  const pluginManager = new PluginManager()\r\n\r\n  // Register all plugins\r\n  plugins.forEach(plugin => {\r\n    pluginManager.register(plugin)\r\n  })\r\n\r\n  // Add plugin management methods\r\n  const enhancedTable = {\r\n    ...table,\r\n    registerPlugin: (plugin: Plugin) => {\r\n      pluginManager.register(plugin)\r\n    },\r\n    unregisterPlugin: (pluginId: string) => {\r\n      pluginManager.unregister(pluginId)\r\n    },\r\n    getPlugin: (pluginId: string) => {\r\n      return pluginManager.get(pluginId)\r\n    },\r\n    pluginManager,\r\n  } as EnhancedTable<TData>\r\n\r\n  return enhancedTable\r\n}\r\n\r\n/**\r\n * Create enhanced table with plugins from options\r\n */\r\nexport function createEnhancedTableWithPlugins<TData extends RowData>(\r\n  options: any,\r\n  plugins: Plugin[] = []\r\n): EnhancedTable<TData> {\r\n  // First create TanStack table\r\n  const tanstackTable = useReactTable(options)\r\n\r\n  // Add plugins\r\n  return withPlugins(tanstackTable, plugins)\r\n}\r\n\r\n/**\r\n * Enhanced version of TanStack useTable with plugins\r\n */\r\nexport function useTableWithPlugins<TData extends RowData>(\r\n  options: any,\r\n  plugins: Plugin[] = []\r\n): EnhancedTable<TData> {\r\n  // First create TanStack table\r\n  const tanstackTable = useReactTable(options)\r\n\r\n  // Add plugins using useMemo for stability\r\n  return useMemo(() => {\r\n    return withPlugins(tanstackTable, plugins)\r\n  }, [tanstackTable, plugins])\r\n}\r\n"],"mappings":"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","names":["createEventBus","useMemo","useReactTable","withEvents","table","config","eventBus","event","handler","payload","options","middleware","createEnhancedTableWithEvents","tanstackTable","useTableWithEvents","createPerformanceMonitor","useMemo","useReactTable","withPerformanceMonitoring","table","config","perfConfig","performanceConfig","monitor","trackedMethods","enhancedTable","method","args","budgets","createEnhancedTableWithPerformance","options","tanstackTable","useTableWithPerformance","createValidationManager","useMemo","useReactTable","withValidation","table","config","validationManager","row","index","rows","createEnhancedTableWithValidation","options","tanstackTable","useTableWithValidation","PluginManager","useMemo","useReactTable","withPlugins","table","plugins","pluginManager","plugin","pluginId","createEnhancedTableWithPlugins","options","tanstackTable","useTableWithPlugins"]}