{"version":3,"sources":["../src/enhancers/withEvents.ts","../src/enhancers/withPerformanceMonitoring.ts","../src/enhancers/withValidation.ts","../src/enhancers/withPlugins.ts"],"sourcesContent":["// Event enhancer for TanStack Table adapter\n// Uses GridKit core EventBus for full event system features\n\nimport type { Table as TanStackTable, RowData } from '@tanstack/react-table'\nimport type { EnhancedTable } from '../types/enhanced'\nimport { EventBus, createEventBus } from '@gridkit/core/events'\nimport { useMemo } from 'react'\nimport { useReactTable } from '@tanstack/react-table'\n\n/**\n * High-order function to add event features to TanStack Table\n */\nexport function withEvents<TData extends RowData>(\n  table: TanStackTable<TData>,\n  config?: { devMode?: boolean } | boolean\n): EnhancedTable<TData> {\n  // Create event bus from core\n  const eventConfig = typeof config === 'boolean' ? {} : config ?? {}\n  const eventBus = createEventBus({\n    devMode: eventConfig.devMode ?? true,\n  })\n\n  // Wrap table with event methods from GridKit core\n  const enhancedTable = {\n    ...table,\n    on: (event: string, handler: (event: any) => void) => {\n      return eventBus.on(event, handler)\n    },\n    off: (event: string, handler: (event: any) => void) => {\n      eventBus.off(event, handler)\n    },\n    emit: (event: string, payload: any, options?: any) => {\n      eventBus.emit(event, payload, options)\n    },\n    use: (middleware: any) => {\n      return eventBus.use(middleware)\n    },\n    getStats: () => eventBus.getStats(),\n  } as EnhancedTable<TData>\n\n  return enhancedTable\n}\n\n/**\n * Create enhanced table with events from options\n */\nexport function createEnhancedTableWithEvents<TData extends RowData>(\n  options: any,\n  config?: { devMode?: boolean } | boolean\n): EnhancedTable<TData> {\n  // First create TanStack table\n  const tanstackTable = useReactTable(options)\n\n  // Add events\n  return withEvents(tanstackTable, config)\n}\n\n/**\n * Enhanced version of TanStack useTable with events\n */\nexport function useTableWithEvents<TData extends RowData>(\n  options: any,\n  config?: { devMode?: boolean } | boolean\n): EnhancedTable<TData> {\n  // First create TanStack table\n  const tanstackTable = useReactTable(options)\n\n  // Add events using useMemo for stability\n  return useMemo(() => {\n    return withEvents(tanstackTable, config)\n  }, [tanstackTable, config])\n}\n","// Performance monitoring enhancer for TanStack Table adapter\n// Uses GridKit core PerformanceMonitor for accurate tracking and budget checking\n\nimport type { Table as TanStackTable, RowData } from '@tanstack/react-table'\nimport type { EnhancedTable, PerformanceConfig } from '../types/enhanced'\nimport { createPerformanceMonitor, type PerformanceMonitor as CorePerformanceMonitor } from '@gridkit/core/performance'\nimport { useMemo } from 'react'\nimport { useReactTable } from '@tanstack/react-table'\n\n/**\n * High-order function to add performance monitoring to TanStack Table\n */\nexport function withPerformanceMonitoring<TData extends RowData>(\n  table: TanStackTable<TData>,\n  config?: PerformanceConfig | boolean\n): EnhancedTable<TData> {\n  // Create performance monitor from core\n  const perfConfig = typeof config === 'boolean' ? {} : config\n  const performanceConfig: any = {\n    enabled: true,\n    budgets: {\n      tableCreation: 100,\n      stateUpdate: 50,\n      renderCycle: 16,\n      rowModelBuild: 30,\n      eventProcessing: 10,\n      ...perfConfig.budgets,\n    },\n    onViolation: perfConfig.onViolation,\n  }\n  const monitor = createPerformanceMonitor(performanceConfig)\n\n  // Track operations - wrap key methods\n  const trackedMethods = ['getRowModel', 'getSortedRowModel', 'getFilteredRowModel']\n  const enhancedTable = { ...table } as EnhancedTable<TData>\n\n  trackedMethods.forEach(method => {\n    // @ts-ignore - dynamically add methods\n    enhancedTable[method] = ((...args: any[]) => {\n      return monitor.track(String(method), () => (table as any)[method](...args))\n    }) as any\n  })\n\n  // Add metrics access with core performance monitor methods\n  enhancedTable.metrics = {\n    ...monitor,\n    getMetrics: () => monitor.getMetrics(),\n    checkBudgets: () => monitor.checkBudgets(),\n    setBudgets: (budgets: any) => monitor.setBudgets(budgets),\n  }\n\n  return enhancedTable\n}\n\n/**\n * Create enhanced table with performance monitoring from options\n */\nexport function createEnhancedTableWithPerformance<TData extends RowData>(\n  options: any,\n  config?: PerformanceConfig | boolean\n): EnhancedTable<TData> {\n  // First create TanStack table\n  const tanstackTable = useReactTable(options)\n\n  // Add performance monitoring\n  return withPerformanceMonitoring(tanstackTable, config)\n}\n\n/**\n * Enhanced version of TanStack useTable with performance monitoring\n */\nexport function useTableWithPerformance<TData extends RowData>(\n  options: any,\n  config?: PerformanceConfig | boolean\n): EnhancedTable<TData> {\n  // First create TanStack table\n  const tanstackTable = useReactTable(options)\n\n  // Add performance monitoring using useMemo for stability\n  return useMemo(() => {\n    return withPerformanceMonitoring(tanstackTable, config)\n  }, [tanstackTable, config])\n}\n","// Validation enhancer for TanStack Table adapter\n// Uses GridKit core ValidationManager for schema-based validation\n\nimport type { Table as TanStackTable, RowData } from '@tanstack/react-table'\nimport type { EnhancedTable, ValidationConfig, ValidationManager } from '../types/enhanced'\nimport { createValidationManager } from '@gridkit/core/validation'\nimport { useMemo } from 'react'\nimport { useReactTable } from '@tanstack/react-table'\n\n/**\n * High-order function to add validation to TanStack Table\n */\nexport function withValidation<TData extends RowData>(\n  table: TanStackTable<TData>,\n  config?: ValidationConfig\n): EnhancedTable<TData> {\n  // Create validation manager from core\n  const validationManager = createValidationManager({\n    defaultMode: config?.mode || 'normal',\n    cacheEnabled: config?.cache ?? true,\n    throwOnError: config?.throwOnError ?? false,\n  })\n\n  // Add validation methods\n  const enhancedTable = {\n    ...table,\n    validator: validationManager,\n    validateRow: async (row: TData, index: number) => {\n      return validationManager.validateRow(row, index)\n    },\n    validateAll: async () => {\n      const rows = (table as any).getRowModel?.().rows || []\n      return validationManager.validateArray(rows)\n    },\n  } as EnhancedTable<TData>\n\n  return enhancedTable\n}\n\n/**\n * Create enhanced table with validation from options\n */\nexport function createEnhancedTableWithValidation<TData extends RowData>(\n  options: any,\n  config?: ValidationConfig\n): EnhancedTable<TData> {\n  // First create TanStack table\n  const tanstackTable = useReactTable(options)\n\n  // Add validation\n  return withValidation(tanstackTable, config)\n}\n\n/**\n * Enhanced version of TanStack useTable with validation\n */\nexport function useTableWithValidation<TData extends RowData>(\n  options: any,\n  config?: ValidationConfig\n): EnhancedTable<TData> {\n  // First create TanStack table\n  const tanstackTable = useReactTable(options)\n\n  // Add validation using useMemo for stability\n  return useMemo(() => {\n    return withValidation(tanstackTable, config)\n  }, [tanstackTable, config])\n}\n","// Plugin enhancer for TanStack Table adapter\n// Uses GridKit core PluginManager for plugin management\n\nimport type { Table as TanStackTable, RowData } from '@tanstack/react-table'\nimport type { EnhancedTable, Plugin } from '../types/enhanced'\nimport { PluginManager } from '@gridkit/core/plugin'\nimport { useMemo } from 'react'\nimport { useReactTable } from '@tanstack/react-table'\n\n/**\n * High-order function to add plugin management to TanStack Table\n */\nexport function withPlugins<TData extends RowData>(\n  table: TanStackTable<TData>,\n  plugins: Plugin[] = []\n): EnhancedTable<TData> {\n  // Create plugin manager from core\n  const pluginManager = new PluginManager()\n\n  // Register all plugins\n  plugins.forEach(plugin => {\n    pluginManager.register(plugin)\n  })\n\n  // Add plugin management methods\n  const enhancedTable = {\n    ...table,\n    registerPlugin: (plugin: Plugin) => {\n      pluginManager.register(plugin)\n    },\n    unregisterPlugin: (pluginId: string) => {\n      pluginManager.unregister(pluginId)\n    },\n    getPlugin: (pluginId: string) => {\n      return pluginManager.get(pluginId)\n    },\n    pluginManager,\n  } as EnhancedTable<TData>\n\n  return enhancedTable\n}\n\n/**\n * Create enhanced table with plugins from options\n */\nexport function createEnhancedTableWithPlugins<TData extends RowData>(\n  options: any,\n  plugins: Plugin[] = []\n): EnhancedTable<TData> {\n  // First create TanStack table\n  const tanstackTable = useReactTable(options)\n\n  // Add plugins\n  return withPlugins(tanstackTable, plugins)\n}\n\n/**\n * Enhanced version of TanStack useTable with plugins\n */\nexport function useTableWithPlugins<TData extends RowData>(\n  options: any,\n  plugins: Plugin[] = []\n): EnhancedTable<TData> {\n  // First create TanStack table\n  const tanstackTable = useReactTable(options)\n\n  // Add plugins using useMemo for stability\n  return useMemo(() => {\n    return withPlugins(tanstackTable, plugins)\n  }, [tanstackTable, plugins])\n}\n"],"mappings":"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","names":["createEventBus","useMemo","useReactTable","withEvents","table","config","eventBus","event","handler","payload","options","middleware","createEnhancedTableWithEvents","tanstackTable","useTableWithEvents","createPerformanceMonitor","useMemo","useReactTable","withPerformanceMonitoring","table","config","perfConfig","performanceConfig","monitor","trackedMethods","enhancedTable","method","args","budgets","createEnhancedTableWithPerformance","options","tanstackTable","useTableWithPerformance","createValidationManager","useMemo","useReactTable","withValidation","table","config","validationManager","row","index","rows","createEnhancedTableWithValidation","options","tanstackTable","useTableWithValidation","PluginManager","useMemo","useReactTable","withPlugins","table","plugins","pluginManager","plugin","pluginId","createEnhancedTableWithPlugins","options","tanstackTable","useTableWithPlugins"]}