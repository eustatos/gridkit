var f=Object.defineProperty;var ae=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var oe=Object.prototype.hasOwnProperty;var re=(e,t)=>{for(var a in t)f(e,a,{get:t[a],enumerable:!0})},ie=(e,t,a,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ne(t))!oe.call(e,n)&&n!==a&&f(e,n,{get:()=>t[n],enumerable:!(o=ae(t,n))||o.enumerable});return e};var le=e=>ie(f({},"__esModule",{value:!0}),e);var he={};re(he,{composeColumnEnhancers:()=>M,createDefaultEnhancedTable:()=>se,createEnhancedColumn:()=>te,createEnhancedTable:()=>m,createEnhancedTableFromOptions:()=>R,createEnhancedTableWithEvents:()=>de,createEnhancedTableWithPerformance:()=>Te,createEnhancedTableWithPlugins:()=>be,createEnhancedTableWithValidation:()=>pe,enhanceColumn:()=>J,formatters:()=>Q,useEnhancedFeatures:()=>F,useEnhancedTable:()=>ue,useGridEnhancedTable:()=>O,useTableBudgets:()=>z,useTableEvents:()=>b,useTableMetrics:()=>g,useTablePerformance:()=>Y,useTablePlugin:()=>B,useTableSelection:()=>I,useTableState:()=>$,useTableStats:()=>A,useTableValidation:()=>h,useTableWithEvents:()=>me,useTableWithPerformance:()=>fe,useTableWithPlugins:()=>ge,useTableWithValidation:()=>De,withColumnEvents:()=>X,withColumnFormat:()=>q,withColumnMetadata:()=>Z,withColumnPerformance:()=>ee,withColumnValidation:()=>_,withEvents:()=>C,withPerformanceMonitoring:()=>v,withPlugins:()=>k,withValidation:()=>V});module.exports=le(he);var s=require("react"),P=require("@tanstack/react-table");var S=require("react"),D=require("@tanstack/react-table"),p=class{constructor(t,a,o){this.table=t,this.eventBus=a,this.performanceMonitor=o}intercept(t,a){let o=this.table[t];return((...n)=>{a?.before?.(n),a?.emitStart&&this.eventBus&&this.eventBus.emit(`${String(t)}:start`,{args:n});let r=this.performanceMonitor?this.performanceMonitor.track(String(t),()=>o(...n)):o(...n);return a?.after?.(r),a?.emitComplete&&this.eventBus&&this.eventBus.emit(`${String(t)}:complete`,{result:r}),r})}};function m(e,t){let a,o,n,r;if(t?.events){let c=typeof t.events=="boolean"?{}:t.events;a={on:(d,T)=>()=>{},off:(d,T)=>{},emit:(d,T)=>{},use:d=>()=>{}},c.middleware&&c.middleware.forEach(d=>{a.use(d)})}t?.performance&&(o={track:(c,d)=>d(),getMetrics:()=>({}),checkBudgets:()=>[],setBudgets:c=>{},clear:()=>{}}),t?.validation&&(n={validateRow:(c,d)=>Promise.resolve({valid:!0,errors:[]}),validateAll:()=>Promise.resolve({valid:!0,errors:[]})}),t?.plugins&&t.plugins.length>0&&(r={register:c=>{},unregister:c=>{},get:c=>{}},t.plugins.forEach(c=>{r.register(c)}));let i=new p(e,a,o),l={...e,on:a?.on,off:a?.off,emit:a?.emit,use:a?.use,getStats:a?(()=>({})):void 0,metrics:o,validator:n,validateRow:n?((c,d)=>n.validateRow(c,d)):void 0,validateAll:n?(()=>n.validateAll()):void 0,registerPlugin:r?.register,unregisterPlugin:r?.unregister,getPlugin:r?.get,pluginManager:r};return["setSorting","setFiltering","setPagination","setGrouping","setColumnVisibility","setColumnPinning"].forEach(c=>{c in e&&(l[c]=i.intercept(c,{emitStart:!0,emitComplete:!0}))}),l}function R(e){let{features:t,...a}=e,o=(0,D.useReactTable)(a);return m(o,t)}function se(e){return R({...e,features:{events:!0,performance:!0,validation:!0,...e.features}})}function ue(e){let{features:t,...a}=e,o=(0,D.useReactTable)(a);return(0,S.useMemo)(()=>m(o,t),[o,t])}function O(e){let{features:t,...a}=e,o=(0,P.useReactTable)(a),n=(0,s.useMemo)(()=>m(o,t),[o,t]);return(0,s.useEffect)(()=>()=>{n.emit?.("table:destroy",{tableId:"unknown"}),n.metrics?.clear?.()},[n,o.options.meta,t]),n}function b(e,t){(0,s.useEffect)(()=>{if(!e.on||!e.off)return;let a=[];return Object.entries(t).forEach(([o,n])=>{if(!e.on)return;let r=e.on(o,n);r&&a.push(r)}),()=>{a.forEach(o=>o())}},[e,t])}function g(e,t){let[a,o]=ce(e.metrics);return(0,s.useEffect)(()=>{if(!t||!e.metrics)return;let n=setInterval(()=>{if(!e.metrics)return;let r=e.metrics.getMetrics?.();o(r)},t);return()=>clearInterval(n)},[t,e.metrics]),a}function ce(e){let[t,a]=(0,s.useState)(e?.getMetrics?.()??void 0);return(0,s.useEffect)(()=>{e&&a(e.getMetrics?.())},[e]),t}function h(e,t=!1){let[a,o]=(0,s.useState)(),[n,r]=(0,s.useState)(!1),i=(0,s.useCallback)(async()=>{if(!e.validateAll&&!e.validator?.validateAll)throw new Error("Validation not enabled");r(!0);try{let l=await e.validateAll?.();return o(l),l}finally{r(!1)}},[e.validateAll,e.validator]);return(0,s.useEffect)(()=>{t&&i()},[e.options.data,t,i]),{report:a,validate:i,isValidating:n}}function B(e,t){let[a,o]=(0,s.useState)();return(0,s.useEffect)(()=>{if(!e.getPlugin)return;let n=e.getPlugin(t);o(n)},[e,t]),a}function F(e,t){b(e,t?.events||{});let a=g(e,t?.metricsInterval),o=h(e,t?.autoValidate);return(0,s.useMemo)(()=>({metrics:a,validation:o}),[a,o])}function Y(e,t){(0,s.useEffect)(()=>{if(!e.metrics||!t)return;Object.entries(t).forEach(([n,r])=>{e.metrics&&e.metrics.setBudgets?.({operations:{[n]:r.maxTime}})});let a=n=>{console.warn("Performance budget exceeded:",n.payload)},o=e.on&&e.on("performance:budget:exceeded",a);return()=>o?.()},[e,t])}function $(e,t){(0,s.useEffect)(()=>{if(!e.on)return;let a=o=>{(o.type==="table:state"||o.type==="table:update")&&t(o.payload)};return e.on?.("table:state",a),e.on?.("table:update",a),()=>{e.off?.("table:state",a),e.off?.("table:update",a)}},[e,t])}function I(e){let[t,a]=(0,s.useState)([]);(0,s.useEffect)(()=>{let r=e.getState?.()?.rowSelection??{},i=Array.isArray(r)?r:Object.keys(r);a(i)},[e]);let o=(0,s.useCallback)((n,r)=>{if(!e.setRowSelection){console.warn("Selection not supported");return}a(i=>r?Array.from(new Set([...i,n])):i.filter(l=>l!==n)),e.setRowSelection((i={})=>{if(r)return{...i,[n]:!0};{let{[n]:l,...u}=i;return u}})},[e]);return[t,o]}function A(e){let[t,a]=(0,s.useState)({totalOperations:0,avgTime:void 0,peakTime:void 0,operations:{}});return(0,s.useEffect)(()=>{if(!e.metrics){a({totalOperations:0,avgTime:void 0,peakTime:void 0,operations:{}});return}let o=e.metrics.getMetrics?.();if(o&&o.operations){let n=0,r=0,i=0,l={};Object.entries(o.operations).forEach(([u,c])=>{n+=c.count||0,r+=c.totalTime||0;let d=c.maxTime||0;d>i&&(i=d),l[u]=c.count||0}),a({totalOperations:n,avgTime:n>0?r/n:void 0,peakTime:i>0?i:void 0,operations:l})}},[e.metrics]),t}function z(e){let[t,a]=(0,s.useState)({}),[o,n]=(0,s.useState)([]);(0,s.useEffect)(()=>{if(!e.metrics)return;let l=e.metrics.getMetrics?.()?.budgets??{};a(l);let u=e.metrics.checkBudgets?.()??[];n(u);let c=d=>{n(T=>[...T,d.payload])};return e.on?.("performance:budget:exceeded",c),()=>{e.off?.("performance:budget:exceeded",c)}},[e.metrics]);let r=(0,s.useCallback)(()=>{if(!e.metrics)return[];let i=e.metrics.checkBudgets?.()??[];return n(i),i},[e.metrics]);return{budgets:t,violations:o,check:r}}var G=require("@gridkit/core/events"),W=require("react"),y=require("@tanstack/react-table");function C(e,t){let o=(0,G.createEventBus)({devMode:(typeof t=="boolean"?{}:t??{}).devMode??!0});return{...e,on:(r,i)=>o.on(r,i),off:(r,i)=>{o.off(r,i)},emit:(r,i,l)=>{o.emit(r,i,l)},use:r=>o.use(r),getStats:()=>o.getStats()}}function de(e,t){let a=(0,y.useReactTable)(e);return C(a,t)}function me(e,t){let a=(0,y.useReactTable)(e);return(0,W.useMemo)(()=>C(a,t),[a,t])}var K=require("@gridkit/core/performance"),U=require("react"),w=require("@tanstack/react-table");function v(e,t){let a=typeof t=="boolean"?{}:t,o={enabled:!0,budgets:{tableCreation:100,stateUpdate:50,renderCycle:16,rowModelBuild:30,eventProcessing:10,...a.budgets},onViolation:a.onViolation},n=(0,K.createPerformanceMonitor)(o),r=["getRowModel","getSortedRowModel","getFilteredRowModel"],i={...e};return r.forEach(l=>{i[l]=((...u)=>n.track(String(l),()=>e[l](...u)))}),i.metrics={...n,getMetrics:()=>n.getMetrics(),checkBudgets:()=>n.checkBudgets(),setBudgets:l=>n.setBudgets(l)},i}function Te(e,t){let a=(0,w.useReactTable)(e);return v(a,t)}function fe(e,t){let a=(0,w.useReactTable)(e);return(0,U.useMemo)(()=>v(a,t),[a,t])}var j=require("@gridkit/core/validation"),N=require("react"),x=require("@tanstack/react-table");function V(e,t){let a=(0,j.createValidationManager)({defaultMode:t?.mode||"normal",cacheEnabled:t?.cache??!0,throwOnError:t?.throwOnError??!1});return{...e,validator:a,validateRow:async(n,r)=>a.validateRow(n,r),validateAll:async()=>{let n=e.getRowModel?.().rows||[];return a.validateArray(n)}}}function pe(e,t){let a=(0,x.useReactTable)(e);return V(a,t)}function De(e,t){let a=(0,x.useReactTable)(e);return(0,N.useMemo)(()=>V(a,t),[a,t])}var H=require("@gridkit/core/plugin"),L=require("react"),E=require("@tanstack/react-table");function k(e,t=[]){let a=new H.PluginManager;return t.forEach(n=>{a.register(n)}),{...e,registerPlugin:n=>{a.register(n)},unregisterPlugin:n=>{a.unregister(n)},getPlugin:n=>a.get(n),pluginManager:a}}function be(e,t=[]){let a=(0,E.useReactTable)(e);return k(a,t)}function ge(e,t=[]){let a=(0,E.useReactTable)(e);return(0,L.useMemo)(()=>k(a,t),[a,t])}function J(e,t){return{...e,...t,cell:a=>{let o=typeof e.cell=="function"?e.cell(a):a.getValue();if(t?.validation&&t.validateCell){let n=a.getValue();t.validateCell(n,a.row.original)}return t?.format?t.format(a.getValue()):o},meta:{...e.meta,...t?.meta}}}function _(e,t,a){return{...e,validation:t,validateCell:async(o,n)=>{let i={[e.id||"field"]:o};return t.validate(i)},cell:o=>{let n=typeof e.cell=="function"?e.cell(o):o.getValue(),r=o.getValue(),l={[e.id||"field"]:r};try{let u=t.validate(l);return typeof n!="object"||n===null?{content:n,isValid:u.valid,errorMessage:u.valid?void 0:u.errors[0]?.message}:n}catch(u){return{content:n,isValid:!1,errorMessage:u instanceof Error?u.message:"Validation failed"}}}}}function q(e,t,a){return{...e,format:t,parse:a}}var Q={currency:(e=2,t="$")=>a=>`${t}${a.toFixed(e)}`,percentage:(e=1,t=!0)=>a=>`${(t?a*100:a).toFixed(e)}%`,date:(e="YYYY-MM-DD")=>t=>{let a=typeof t=="string"||typeof t=="number"?new Date(t):t;if(isNaN(a.getTime()))return"";switch(e){case"ISO":return a.toISOString();case"MM/DD/YYYY":return`${(a.getMonth()+1).toString().padStart(2,"0")}/${a.getDate().toString().padStart(2,"0")}/${a.getFullYear()}`;case"DD/MM/YYYY":return`${a.getDate().toString().padStart(2,"0")}/${(a.getMonth()+1).toString().padStart(2,"0")}/${a.getFullYear()}`;default:return a.toISOString().split("T")[0]}},truncate:(e=50,t="...")=>a=>a.length>e?`${a.slice(0,e-t.length)}${t}`:a,uppercase:()=>e=>e.toUpperCase(),lowercase:()=>e=>e.toLowerCase(),number:(e=2,t=!0)=>a=>a.toLocaleString(void 0,{minimumFractionDigits:e,maximumFractionDigits:e,useGrouping:t}),fileSize:(e=2)=>t=>{if(t===0)return"0 Bytes";let a=1024,o=["Bytes","KB","MB","GB","TB"],n=Math.floor(Math.log(t)/Math.log(a));return(t/Math.pow(a,n)).toFixed(e).replace(/\.?0+$/,"")+" "+o[n]},phoneNumber:()=>e=>{let t=e.replace(/\D/g,"");return t.length===10?`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6)}`:t.length===11&&t.startsWith("1")?`+1 (${t.slice(1,4)}) ${t.slice(4,7)}-${t.slice(7)}`:e},boolean:(e="Yes",t="No")=>a=>a?e:t,capitalize:()=>e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()};function X(e,t,a){return{...e,eventEmitter:t,onCellEdit:a?.onEdit,onCellClick:a?.onClick,onCellFocus:a?.onFocus,cell:o=>{let n=typeof e.cell=="function"?e.cell(o):o.getValue(),r=o.getValue(),i=o.row.original,l=o.row.index;return t.emit({type:"cell:render",payload:{columnId:e.id,value:r,row:i,rowIndex:l}}),a?.onClick&&t.emit({type:"cell:click",payload:{columnId:e.id,value:r,row:i,rowIndex:l}}),n}}}function Z(e,t){return{...e,meta:{...e.meta,...t}}}function ee(e,t){let a=new Map,o=new Map,n=t?.cacheable??!0,r=t?.memoize??!0;return{...e,cacheable:n,memoize:r,cell:i=>{if(n){let u=`${i.row.id}-${e.id}`;if(a.has(u))return a.get(u)}let l=typeof e.cell=="function"?e.cell(i):i.getValue();if(n){let u=`${i.row.id}-${e.id}`;a.set(u,l)}if(r){let u=JSON.stringify(i.row.original);if(o.has(u))return o.get(u);o.set(u,l)}return l}}}function M(...e){return t=>e.reduce((a,o)=>o(a),t)}function te(e,...t){return M(...t)(e)}
//# sourceMappingURL=index.js.map