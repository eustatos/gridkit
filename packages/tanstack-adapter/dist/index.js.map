{"version":3,"sources":["../src/index.ts","../src/core/createEnhancedTable.ts","../src/enhancers/withEvents.ts","../src/enhancers/withPerformanceMonitoring.ts","../src/enhancers/withValidation.ts"],"sourcesContent":["// React hooks entry point for @gridkit/tanstack-adapter\nimport { useMemo } from 'react'\nimport type { TableOptions, RowData } from '@tanstack/react-table'\nimport { useReactTable } from '@tanstack/react-table'\nimport type { EnhancedTable, EnhancedTableFeatures } from './types/enhanced'\nimport { createEnhancedTable, createEnhancedTableFromOptions, createDefaultEnhancedTable } from './core/createEnhancedTable'\nimport { withEvents } from './enhancers/withEvents'\nimport { withPerformanceMonitoring } from './enhancers/withPerformanceMonitoring'\nimport { withValidation } from './enhancers/withValidation'\n\n/**\n * Enhanced useTable hook that adds GridKit features to TanStack Table\n */\nexport function useGridEnhancedTable<TData extends RowData>(\n  options: TableOptions<TData> & {\n    features?: EnhancedTableFeatures\n  }\n): EnhancedTable<TData> {\n  // Get TanStack table options (excluding GridKit features)\n  const { features, ...tanstackOptions } = options\n\n  // Create TanStack table instance\n  const tanstackTable = useReactTable(tanstackOptions)\n\n  // Create enhanced table with GridKit features\n  const enhancedTable = useMemo(() => {\n    return createEnhancedTable(tanstackTable, features)\n  }, [tanstackTable, features])\n\n  return enhancedTable\n}\n\n/**\n * Use table metrics hook for accessing performance metrics\n */\nexport function useTableMetrics<TData extends RowData>(\n  table: EnhancedTable<TData>\n) {\n  return useMemo(() => {\n    return {\n      getOperationStats: (operation: string) => {\n        return table.metrics?.getOperationStats(operation)\n      },\n      getMemoryMetrics: () => {\n        return table.metrics?.getMemoryMetrics()\n      },\n    }\n  }, [table.metrics])\n}\n\n/**\n * Use validation hook for accessing validation methods\n */\nexport function useValidation<TData extends RowData>(\n  table: EnhancedTable<TData>\n) {\n  return useMemo(() => {\n    return {\n      validateRow: async (row: TData, index: number) => {\n        if (!table.validateRow) {\n          throw new Error('Validation not enabled')\n        }\n        return table.validateRow(row, index)\n      },\n      validateAll: async () => {\n        if (!table.validateAll) {\n          throw new Error('Validation not enabled')\n        }\n        return table.validateAll()\n      },\n      validator: table.validator,\n    }\n  }, [table.validateRow, table.validateAll, table.validator])\n}\n\n/**\n * Use table events hook for accessing event methods\n */\nexport function useTableEvents<TData extends RowData>(\n  table: EnhancedTable<TData>\n) {\n  return useMemo(() => {\n    return {\n      on: table.on,\n      off: table.off,\n      emit: table.emit,\n      use: table.use,\n    }\n  }, [table.on, table.off, table.emit, table.use])\n}\n\n// Re-export main exports\nexport {\n  createEnhancedTable,\n  createEnhancedTableFromOptions,\n  createDefaultEnhancedTable,\n  withEvents,\n  withPerformanceMonitoring,\n  withValidation\n}\n\nexport type { EnhancedTable, EnhancedTableFeatures }\n","// Core adapter implementation for @gridkit/tanstack-adapter\n// Simplified implementation without direct core dependencies\n\nimport type { Table as TanStackTable } from '@tanstack/react-table'\nimport type { EnhancedTable, EnhancedTableFeatures } from '../types/enhanced'\n\n/**\n * Create enhanced table that combines TanStack Table with GridKit features\n */\nexport function createEnhancedTable<TData>(\n  tanstackTable: TanStackTable<TData>,\n  _features?: EnhancedTableFeatures\n): EnhancedTable<TData> {\n  // This is a simplified implementation\n  // GridKit features will be integrated in later phases\n  // For now, we just wrap the TanStack table\n\n  const enhancedTable = {\n    ...tanstackTable,\n  } as EnhancedTable<TData>\n\n  return enhancedTable\n}\n\n/**\n * Create enhanced table from scratch (without TanStack instance)\n */\nexport function createEnhancedTableFromOptions<TData>(\n  _options: any\n): EnhancedTable<TData> {\n  // This would require creating a TanStack table first\n  // Implementation depends on available APIs\n  throw new Error('createEnhancedTableFromOptions not yet implemented')\n}\n\n/**\n * Wrapper function to create enhanced table with default features\n */\nexport function createDefaultEnhancedTable<TData>(\n  options: any\n): EnhancedTable<TData> {\n  return createEnhancedTableFromOptions<TData>({\n    ...options,\n    features: {\n      events: true,\n      performance: true,\n      validation: true,\n      ...options.features,\n    },\n  })\n}\n","// Event enhancer for TanStack Table adapter\n// Simplified - creates basic event bus without core dependencies\n\nimport type { Table as TanStackTable } from '@tanstack/react-table'\nimport type { EnhancedTable, EventConfig } from '../types/enhanced'\n\n// Minimal event bus implementation\ninterface EventBus {\n  on<T extends string>(event: T, handler: (event: any) => void): () => void\n  off<T extends string>(event: T, handler: (event: any) => void): void\n  emit<T extends string>(event: T, payload: any, options?: any): void\n  use(middleware: any): () => void\n}\n\nclass SimpleEventBus implements EventBus {\n  private handlers: Map<string, Set<(event: any) => void>> = new Map()\n\n  on<T extends string>(event: T, handler: (event: any) => void): () => void {\n    if (!this.handlers.has(event)) {\n      this.handlers.set(event, new Set())\n    }\n    this.handlers.get(event)!.add(handler)\n    return () => this.off(event, handler)\n  }\n\n  off<T extends string>(event: T, handler: (event: any) => void): void {\n    const handlers = this.handlers.get(event)\n    if (handlers) {\n      handlers.delete(handler)\n    }\n  }\n\n  emit<T extends string>(event: T, payload: any, options?: any): void {\n    const handlers = this.handlers.get(event)\n    if (handlers) {\n      handlers.forEach(handler => handler({ type: event, payload, ...options }))\n    }\n  }\n\n  use(_middleware: any): () => void {\n    // Middleware not implemented in simplified version\n    return () => {}\n  }\n}\n\n/**\n * High-order function to add event features to TanStack Table\n */\nexport function withEvents<TData>(\n  table: TanStackTable<TData>,\n  _config?: EventConfig | boolean\n): EnhancedTable<TData> {\n  // Create event bus\n  const eventBus = new SimpleEventBus()\n\n  // Wrap table with event methods\n  const enhancedTable = {\n    ...table,\n    on: (event: string, handler: (event: any) => void) => {\n      return eventBus.on(event, handler)\n    },\n    off: (event: string, handler: (event: any) => void) => {\n      eventBus.off(event, handler)\n    },\n    emit: (event: string, payload: any, options?: any) => {\n      eventBus.emit(event, payload, options)\n    },\n    use: (middleware: any) => {\n      return eventBus.use(middleware)\n    },\n  } as EnhancedTable<TData>\n\n  return enhancedTable\n}\n\n/**\n * Enhanced version of TanStack useTable with events\n */\nexport function useTableWithEvents(options: any) {\n  // First create TanStack table\n  const table = options.useTable(options)\n\n  // Add events\n  const enhanced = withEvents(table, options.features?.events)\n\n  // Track table for cleanup\n  return enhanced\n}\n","// Performance monitoring enhancer for TanStack Table adapter\n// Simplified - creates basic performance tracking without core dependencies\n\nimport type { Table as TanStackTable } from '@tanstack/react-table'\nimport type { EnhancedTable, PerformanceConfig } from '../types/enhanced'\n\n// Basic performance monitor\ninterface PerformanceMonitor {\n  getOperationStats(operation: string): any\n  getMemoryMetrics(): any\n  track<T>(operation: string, fn: () => T): T\n}\n\nclass SimplePerformanceMonitor implements PerformanceMonitor {\n  private stats: Map<string, { count: number; totalTime: number }> = new Map()\n\n  track<T>(operation: string, fn: () => T): T {\n    const start = performance.now()\n    const result = fn()\n    const duration = performance.now() - start\n\n    const stats = this.stats.get(operation) || { count: 0, totalTime: 0 }\n    this.stats.set(operation, {\n      count: stats.count + 1,\n      totalTime: stats.totalTime + duration\n    })\n\n    return result\n  }\n\n  getOperationStats(operation: string): any {\n    const stats = this.stats.get(operation)\n    if (!stats) return null\n\n    return {\n      operation,\n      count: stats.count,\n      avgTime: stats.totalTime / stats.count,\n      totalTime: stats.totalTime\n    }\n  }\n\n  getMemoryMetrics(): any {\n    // Simplified - would use performance.memory in browser\n    return {\n      heapUsed: 0,\n      heapTotal: 0,\n      external: 0\n    }\n  }\n}\n\n/**\n * High-order function to add performance monitoring to TanStack Table\n */\nexport function withPerformanceMonitoring<TData>(\n  table: TanStackTable<TData>,\n  _config?: PerformanceConfig | boolean\n): EnhancedTable<TData> {\n  // Create performance monitor\n  const monitor = new SimplePerformanceMonitor()\n\n  // Track operations\n  const trackedMethods = ['getRowModel', 'getSortedRowModel', 'getFilteredRowModel']\n  const enhancedTable = { ...table } as EnhancedTable<TData>\n\n  trackedMethods.forEach(method => {\n    // @ts-ignore - dynamically add methods\n    enhancedTable[method] = ((...args: any[]) => {\n      return monitor.track(String(method), () => (table as any)[method](...args))\n    }) as any\n  })\n\n  // Add metrics access\n  enhancedTable.metrics = monitor\n\n  return enhancedTable\n}\n\n/**\n * Create enhanced table with performance monitoring\n */\nexport function createEnhancedTableWithPerformance<TData>(\n  options: any,\n  _performanceConfig?: PerformanceConfig | boolean\n): EnhancedTable<TData> {\n  // Create TanStack table\n  const tanstackTable = options.useTable(options)\n\n  // Add performance monitoring\n  return withPerformanceMonitoring(tanstackTable, _performanceConfig)\n}\n","// Validation enhancer for TanStack Table adapter\n// Simplified - self-contained without core dependencies\n\nimport type { Table as TanStackTable } from '@tanstack/react-table'\nimport type { EnhancedTable, ValidationConfig, ValidationManager } from '../types/enhanced'\n\n// Basic validation result type\ninterface ValidationResult {\n  isValid: boolean\n  errors: ValidationError[]\n  warnings: ValidationError[]\n}\n\ninterface ValidationError {\n  field: string\n  message: string\n  severity: 'error' | 'warning'\n  code: string\n}\n\n// Simplified validation manager\nclass SimpleValidationManager implements ValidationManager {\n  private mode: 'strict' | 'normal' | 'minimal' | 'none'\n\n  constructor(config?: ValidationConfig) {\n    this.mode = config?.mode || 'normal'\n  }\n\n  async validateRow(_row: any, _index: number): Promise<ValidationResult> {\n    const errors: ValidationError[] = []\n    const warnings: ValidationError[] = []\n\n    // Check required fields (simple example)\n    if (this.mode !== 'none') {\n      // Simplified validation logic\n    }\n\n    const isValid = errors.length === 0\n\n    return {\n      isValid,\n      errors,\n      warnings\n    }\n  }\n\n  async validateAll(_rows: any[]): Promise<ValidationResult[]> {\n    // Simplified - would validate all rows\n    return []\n  }\n}\n\n/**\n * High-order function to add validation to TanStack Table\n */\nexport function withValidation<TData>(\n  table: TanStackTable<TData>,\n  config?: ValidationConfig\n): EnhancedTable<TData> {\n  // Create validation manager\n  const validator = new SimpleValidationManager(config)\n\n  // Add validation methods\n  // @ts-ignore - adding new methods to table\n  const enhancedTable = {\n    ...table,\n    validator,\n    validateRow: async (row: TData, index: number) => {\n      return validator.validateRow(row, index)\n    },\n    validateAll: async () => {\n      const rows = (table as any).getRowModel?.().rows || []\n      return validator.validateAll(rows)\n    },\n  } as EnhancedTable<TData>\n\n  return enhancedTable\n}\n\n/**\n * Create enhanced table with validation\n */\nexport function createEnhancedTableWithValidation<TData>(\n  options: any,\n  validationConfig?: ValidationConfig\n): EnhancedTable<TData> {\n  // Create TanStack table\n  const tanstackTable = options.useTable(options)\n\n  // Add validation\n  return withValidation(tanstackTable, validationConfig)\n}\n"],"mappings":"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","names":["index_exports","__export","createDefaultEnhancedTable","createEnhancedTable","createEnhancedTableFromOptions","useGridEnhancedTable","useTableEvents","useTableMetrics","useValidation","withEvents","withPerformanceMonitoring","withValidation","__toCommonJS","import_react","import_react_table","createEnhancedTable","tanstackTable","_features","createEnhancedTableFromOptions","_options","createDefaultEnhancedTable","options","SimpleEventBus","event","handler","handlers","payload","options","_middleware","withEvents","table","_config","eventBus","middleware","SimplePerformanceMonitor","operation","fn","start","result","duration","stats","withPerformanceMonitoring","table","_config","monitor","trackedMethods","enhancedTable","method","args","SimpleValidationManager","config","_row","_index","errors","warnings","_rows","withValidation","table","validator","row","index","rows","useGridEnhancedTable","options","features","tanstackOptions","tanstackTable","createEnhancedTable","useTableMetrics","table","operation","useValidation","row","index","useTableEvents"]}